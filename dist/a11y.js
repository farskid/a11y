function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var r=require("fs"),n=e(require("minimist")),t=require("colors"),o=require("axe-puppeteer"),i=require("puppeteer"),u=e(require("pa11y")),s=e(require("ora")),c=require("path"),l=function(e){return t.white(e)},a=function(e){return t.bold(e).red},f=function(e){return t.bold(e).green},p=function(e){return t.magenta(e)},v=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return console.log.apply(console,e.map(l))},h=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return console.log.apply(console,e.map(a))},d=function(e){try{return Promise.resolve(y(e)).then(function(e){var r=e.results;return{documentTitle:e.documentTitle,pageUrl:r.url,errors:r.violations,warnings:r.incomplete,notices:r.inapplicable}})}catch(e){return Promise.reject(e)}},y=function(e){try{return Promise.resolve(i.launch()).then(function(r){return Promise.resolve(r.newPage()).then(function(n){return Promise.resolve(n.setBypassCSP(!0)).then(function(){return Promise.resolve(n.goto(e)).then(function(){return Promise.resolve(new o.AxePuppeteer(n).analyze()).then(function(e){return Promise.resolve(n.title()).then(function(t){return Promise.resolve(n.close()).then(function(){return Promise.resolve(r.close()).then(function(){return{results:e,documentTitle:t}})})})})})})})})}catch(e){return Promise.reject(e)}},m=function(e){try{return Promise.resolve(u(e,{rootElement:"#__next",standard:"WCAG2A",includeNotices:!0,includeWarnings:!0})).then(function(e){return{documentTitle:e.documentTitle,pageUrl:e.pageUrl,errors:e.issues.filter(function(e){return"error"===e.type}),warnings:e.issues.filter(function(e){return"warning"===e.type}),notices:e.issues.filter(function(e){return"notice"===e.type})}})}catch(e){return Promise.reject(e)}},g=["axecore","pa11y"];!function(){var e=n(process.argv.slice(2)),o=e.url,i=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&-1===r.indexOf(t)&&(n[t]=e[t]);return n}(e,["url"]);if("string"!=typeof o||""===o)return h("a11y can't find a url");var u={out:c.resolve(process.cwd())};!function(e,n){try{var o=n.out,i=(y="Gathering a11y insights for "+p(e),s(y));v("\n"),i.start();var u=Promise.all([d(e),m(e)]),l=function(e,n){try{var i=function(e,n){try{var i=Promise.resolve(u).then(function(e){var n="\n      "+"Accessibility Results For:".toUpperCase()+"\n      -----------\n      "+e[0].documentTitle+"\n      "+e[0].pageUrl+"\n    ";e.forEach(function(e,i){n+="\n      "+function(e,r,n){var o=c.resolve(r,"a11y-report-"+g[i]+".json");return"\n    -----------\n    "+a("A11y:: Errors found: "+e.errors.length)+"\n    "+t.bold("A11y:: Warnings Found: "+e.warnings.length).yellow+"\n    "+t.bold("A11y:: Notices Found: "+e.notices.length).cyan+"\n    -----------\n    Reports saved in "+p("<"+o+">")+"\n  "}(e,o)+"\n      ",r.writeFileSync(c.resolve(o,"a11y-report-"+g[i]+".json"),JSON.stringify(e,function(e,r){return void 0===r?"undefined":r},2))}),v(n),process.exitCode=0})}catch(e){return n(e)}return i&&i.then?i.then(void 0,n):i}(0,function(e){h(e),process.exitCode=1})}catch(e){return n(!0,e)}return i&&i.then?i.then(n.bind(null,!1),n.bind(null,!0)):n(!1,value)}(0,function(e,r){if(function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];console.log.apply(console,e.map(f))}("Done!"),i.stop(),e)throw r;return r});Promise.resolve(l&&l.then?l.then(function(){}):void 0)}catch(e){return Promise.reject(e)}var y}(o,Object.assign({},u,i))}();
//# sourceMappingURL=a11y.js.map
