!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(require("fs"),require("minimist"),require("colors"),require("axe-puppeteer"),require("puppeteer"),require("pa11y"),require("ora"),require("path")):"function"==typeof define&&define.amd?define(["fs","minimist","colors","axe-puppeteer","puppeteer","pa11y","ora","path"],r):r(e.fs,e.minimist,e.colors,e.axePuppeteer,e.puppeteer,e.pa11y,e.ora,e.path)}(this,function(e,r,n,t,o,i,u,s){r=r&&r.hasOwnProperty("default")?r.default:r,i=i&&i.hasOwnProperty("default")?i.default:i,u=u&&u.hasOwnProperty("default")?u.default:u;var c=function(e){return n.white(e)},l=function(e){return n.bold(e).red},a=function(e){return n.bold(e).green},f=function(e){return n.magenta(e)},p=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return console.log.apply(console,e.map(c))},d=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return console.log.apply(console,e.map(l))},h=function(e){try{return Promise.resolve(y(e)).then(function(e){var r=e.results;return{documentTitle:e.documentTitle,pageUrl:r.url,errors:r.violations,warnings:r.incomplete,notices:r.inapplicable}})}catch(e){return Promise.reject(e)}},y=function(e){try{return Promise.resolve(o.launch()).then(function(r){return Promise.resolve(r.newPage()).then(function(n){return Promise.resolve(n.setBypassCSP(!0)).then(function(){return Promise.resolve(n.goto(e)).then(function(){return Promise.resolve(new t.AxePuppeteer(n).analyze()).then(function(e){return Promise.resolve(n.title()).then(function(t){return Promise.resolve(n.close()).then(function(){return Promise.resolve(r.close()).then(function(){return{results:e,documentTitle:t}})})})})})})})})}catch(e){return Promise.reject(e)}},v=function(e){try{return Promise.resolve(i(e,{rootElement:"#__next",standard:"WCAG2A",includeNotices:!0,includeWarnings:!0})).then(function(e){return{documentTitle:e.documentTitle,pageUrl:e.pageUrl,errors:e.issues.filter(function(e){return"error"===e.type}),warnings:e.issues.filter(function(e){return"warning"===e.type}),notices:e.issues.filter(function(e){return"notice"===e.type})}})}catch(e){return Promise.reject(e)}},m=["axecore","pa11y"];!function(){var t=r(process.argv.slice(2)),o=t.url,i=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&-1===r.indexOf(t)&&(n[t]=e[t]);return n}(t,["url"]);if("string"!=typeof o||""===o)return d("a11y can't find a url");var c={out:s.resolve(process.cwd())};!function(r,t){try{var o=t.out,i=(g="Gathering a11y insights for "+f(r),u(g));p("\n"),i.start();var c=Promise.all([h(r),v(r)]),y=function(r,t){try{var i=function(r,t){try{var i=Promise.resolve(c).then(function(r){var t="\n      "+"Accessibility Results For:".toUpperCase()+"\n      -----------\n      "+r[0].documentTitle+"\n      "+r[0].pageUrl+"\n    ";r.forEach(function(r,i){t+="\n      "+function(e,r,t){var o=s.resolve(r,"a11y-report-"+m[i]+".json");return"\n    -----------\n    "+l("A11y:: Errors found: "+e.errors.length)+"\n    "+n.bold("A11y:: Warnings Found: "+e.warnings.length).yellow+"\n    "+n.bold("A11y:: Notices Found: "+e.notices.length).cyan+"\n    -----------\n    Reports saved in "+f("<"+o+">")+"\n  "}(r,o)+"\n      ",e.writeFileSync(s.resolve(o,"a11y-report-"+m[i]+".json"),JSON.stringify(r,function(e,r){return void 0===r?"undefined":r},2))}),p(t),process.exitCode=0})}catch(e){return t(e)}return i&&i.then?i.then(void 0,t):i}(0,function(e){d(e),process.exitCode=1})}catch(e){return t(!0,e)}return i&&i.then?i.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}(0,function(e,r){if(function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];console.log.apply(console,e.map(a))}("Done!"),i.stop(),e)throw r;return r});Promise.resolve(y&&y.then?y.then(function(){}):void 0)}catch(e){return Promise.reject(e)}var g}(o,Object.assign({},c,i))}()});
//# sourceMappingURL=a11y.umd.js.map
